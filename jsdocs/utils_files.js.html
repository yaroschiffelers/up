<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/files.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/files.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * File System Utilities
 */
'use strict'

const fs = require('fs')
const path = require('path')
const junk = require('junk')
const { compose, filter } = require('./functional')

/**
 * Read the content of a directory
 * @param  {String | Buffer} dir - path to dir
 * @return {Array} - Names of items in dir
 */
const readDir = dir => fs.readdirSync(dir)

/**
 * Require a file/module asynchronous
 * @param  {[type]} path [description]
 * @return {[type]}      [description]
 */
const requireFile = async path => await require(path)

/**
 * filterJunk :: String -> [String]
 */
const filterJunk = filter(junk.not)

/**
 * readDirAndFilter :: (a -> [String]) -> (b -> Bool) -> [String]
 */
const readDirAndFilter = compose(
  filterJunk,
  readDir
)

/**
 * Resolve the path to a directory, based on the global __rootDir variable.
 * @param  {String} location - path to the directory
 * @return {String}          - resolved rootpath and directory location
 */
const resolveRoot = location => path.resolve(__rootDir, location)

/**
 * Resolve a path and require the file.
 */
const resolveAndRequire = compose(
  resolveRoot,
  require
)

/**
 * Creates a directory if it does not exist. Handles some
 * edge cases that could result in error while trying to
 * determine whether a directory exists or not and create that
 * directory at the same time.
 *
 * @credit
 * based on: https://stackoverflow.com/a/21196961 (by josh3736).
 *
 * @param  {string}   path - where the directory should be created.
 * @param  {Function} cb   - Callback function, returns an error object.
 * @return {Function | Object}      - Callback function or Error object.
 */
const dirEnsureExists = (path, cb) => {
  fs.mkdir(path, err => {
    !err ? cb(null) : err.code === 'EEXIST' ? cb(null) : cb(err)
  })
}

module.exports = {
    readDir,
    requireFile,
    filterJunk,
    readDirAndFilter,
    resolveRoot,
    resolveAndRequire,
    dirEnsureExists
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#assertCb">assertCb</a></li><li><a href="global.html#compose">compose</a></li><li><a href="global.html#createLogger">createLogger</a></li><li><a href="global.html#deepCopy">deepCopy</a></li><li><a href="global.html#dirEnsureExists">dirEnsureExists</a></li><li><a href="global.html#filter">filter</a></li><li><a href="global.html#filterJunk">filterJunk</a></li><li><a href="global.html#find">find</a></li><li><a href="global.html#identity">identity</a></li><li><a href="global.html#is">is</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isBoolean">isBoolean</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isVal">isVal</a></li><li><a href="global.html#LOG_LEVELS">LOG_LEVELS</a></li><li><a href="global.html#mapObject">mapObject</a></li><li><a href="global.html#mapObjectKeyValue">mapObjectKeyValue</a></li><li><a href="global.html#match">match</a></li><li><a href="global.html#no">no</a></li><li><a href="global.html#noop">noop</a></li><li><a href="global.html#once">once</a></li><li><a href="global.html#overload">overload</a></li><li><a href="global.html#readDir">readDir</a></li><li><a href="global.html#readDirAndFilter">readDirAndFilter</a></li><li><a href="global.html#reduceRight">reduceRight</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#requireFile">requireFile</a></li><li><a href="global.html#resolveAndRequire">resolveAndRequire</a></li><li><a href="global.html#resolveRoot">resolveRoot</a></li><li><a href="global.html#store">store</a></li><li><a href="global.html#Up">Up</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Dec 10 2018 22:21:12 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
